<div layout="column" layout-fill>

  <navbar>
    <md-button ng-click="main.newGist()" class="md-raised">
      New
    </md-button>
    <md-button ng-if="main.Auth.isLogged()" ng-click="main.save()" class="md-raised">
      Save
    </md-button>
    <md-button ng-if="main.isForkeable()" ng-click="main.fork()" class="md-raised">
      Fork
    </md-button>
    <md-button ng-click="main.info($event)" class="md-raised">
      Info
    </md-button>
    <!--<md-button ng-click="main.share($event)" class="md-raised">
      Share
    </md-button>-->

    <!-- fill up the space between left and right area -->
    <span flex></span>

    <a ng-if="!main.Auth.isLogged()" href="https://github.com/login/oauth/authorize?client_id=6e6377a2f4543ef05194&scope=user:email,user:follow,gist" class="btn-github">Log in with Github</a>

    <div ng-if="main.Auth.isLogged()" layout="row" layout-align="end center">
        <img ng-src="{{main.user.avatar_url}}" alt="{{main.user.name}}" class="face">
        <span>{{main.user.name}}</span>
    </div>
  </navbar>

  <md-content class="fb">
    <md-tabs md-selected="0" md-stretch-tabs="always" class="md-primary techs" layout-align="space-around center">
      <md-tab id="tab1" label="HTML">
        <div ng-model="main.html" ng-change="main.change('html')" ui-ace="{
            useWrapMode : true,
            theme:'monokai',
            mode: 'html',
            require: ['ace/ext/language_tools'],
            advanced: {
                enableSnippets: true,
                enableBasicAutocompletion: true,
                enableLiveAutocompletion: true
            }
          }"></div>
      </md-tab>
      <md-tab id="tab2" label="CSS">
        <div ng-model="main.css" ng-change="main.change('css')" ui-ace="{
            useWrapMode : true,
            theme:'monokai',
            mode: 'css',
            require: ['ace/ext/language_tools'],
            advanced: {
                enableSnippets: true,
                enableBasicAutocompletion: true,
                enableLiveAutocompletion: true
            }
          }"></div>
      </md-tab>
      <md-tab id="tab3" label="JS">
        <div ng-model="main.js" ng-change="main.change('js')" ui-ace="{
            useWrapMode : true,
            theme:'monokai',
            mode: 'javascript',
            require: ['ace/ext/language_tools'],
            advanced: {
                enableSnippets: true,
                enableBasicAutocompletion: true,
                enableLiveAutocompletion: true
            }
          }"></div>
      </md-tab>
    </md-tabs>
    <handle></handle>
    <iframe id="preview"></iframe>
  </md-content>
</div>
