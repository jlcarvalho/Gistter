!function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t){"use strict";var e=t("../components/auth/auth.service")["default"],n=t("../components/github/github.service")["default"],o=t("./login/login.controller")["default"],i=t("./main/main.controller")["default"],r=t("../components/navbar/navbar.directive")["default"];angular.module("coder",["restangular","ui.router","ngMaterial","ui.ace"]).controller("LoginCtrl",o).controller("MainCtrl",i).directive("navbar",r.directiveFactory).service("Auth",e).service("GH",n).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(t,e,n){t.html5Mode(!0),e.state("home",{url:"/editor/:gistId?",templateUrl:"app/main/main.html",controller:"MainCtrl as main"}).state("login",{url:"/login?code",templateUrl:"app/login/login.html",controller:"LoginCtrl as login"}),n.otherwise("/editor/")}])},{"../components/auth/auth.service":4,"../components/github/github.service":5,"../components/navbar/navbar.directive":6,"./login/login.controller":2,"./main/main.controller":3}],2:[function(t,e,n){"use strict";var o=function(t,e,n){t.isLogged()||t.getToken(e.code).then(function(){n.go("home")},function(t){t&&console.dir("Oops!")})};o.$inject=["Auth","$stateParams","$state"],n["default"]=o},{}],3:[function(t,e,n){"use strict";var o=function(){var t=function(t,e,n,o,i){var r=this;if(this.Auth=o,o.isLogged()&&i.getUser().show(!1,function(e,n){r.user=n,t.$apply()}),n.gistId){var s=i.getGist(n.gistId);s.read(function(t,e){r.html=e.files["index.html"]?e.files["index.html"].content:"",r.css=e.files["main.css"]?e.files["main.css"].content:"",r.js=e.files["app.js"]?e.files["app.js"].content:"",r.updateIframe()})}this.checkStorage(),this.updateIframe(),this.change=function(t){sessionStorage[t]=r[t],r.updateIframe()},this.save=function(){var t={};sessionStorage.html&&(t["index.html"]={content:sessionStorage.html}),sessionStorage.css&&(t["main.css"]={content:sessionStorage.css}),sessionStorage.js&&(t["app.js"]={content:sessionStorage.js}),""===n.gistId?i.getGist().create({access_token:sessionStorage.token,description:"Coder: the description for this gist","public":!0,files:t},function(t,n){console.dir(n),e.go("home",{gistId:n.id})}):i.getGist(n.gistId).update({access_token:sessionStorage.token,description:"Coder: the description for this gist",files:t},function(t,e){console.dir(e)})}};return t.prototype.checkStorage=function(){sessionStorage.html&&(this.html=sessionStorage.html),sessionStorage.css&&(this.css=sessionStorage.css),sessionStorage.js&&(this.js=sessionStorage.js)},t.prototype.updateIframe=function(){document.getElementById("preview").contentWindow.document.write(this.html+"<style>"+this.css+"</style><script>"+this.js+"</script>"),document.getElementById("preview").contentWindow.document.close()},t}();o.$inject=["$scope","$state","$stateParams","Auth","GH"],n["default"]=o},{}],4:[function(t,e,n){"use strict";var o=function(){var t=function(t,e){this.http=t,this.promise=e};return t.prototype.getToken=function(t){var e=this.promise.defer();return this.http.get("http://localhost:9999/authenticate/"+t).success(function(t){t.hasOwnProperty("error")?e.reject(!0):(sessionStorage.token=t.token,e.resolve(!0))}),e.promise},t.prototype.isLogged=function(){return angular.isDefined(sessionStorage.token)?!0:void 0},t}();o.$inject=["$http","$q"],n["default"]=o},{}],5:[function(t,e,n){"use strict";var o=function(){var t=new Github({token:sessionStorage.token,auth:"oauth"});return t};n["default"]=o},{}],6:[function(t,e,n){"use strict";var o=function(){var t=function(){this.templateUrl="components/navbar/navbar.html",this.restrict="E",this.transclude=!0,this.controllerAs="navbar",this.bindToController=!0};return t.prototype.controller=function(t,e,n){var o=this;this.Auth=e,e.isLogged()&&n.getUser().show(!1,function(e,n){o.user=n,t.$apply()})},t.directiveFactory=function(){return t.instance=new t,t.instance},t}();n["default"]=o},{}]},{},[1]),angular.module("coder").run(["$templateCache",function(t){t.put("app/login/login.html",'<div layout="vertical" layout-fill=""><div layout="row" layout-sm="column" layout-align="space-around"><md-progress-circular md-mode="indeterminate"></md-progress-circular></div></div>'),t.put("app/main/main.html",'<div layout="vertical" layout-fill=""><navbar><md-button ng-if="main.Auth.isLogged()" ng-click="main.save()" class="md-raised">Save</md-button><span flex=""></span> <a ng-if="!main.Auth.isLogged()" href="https://github.com/login/oauth/authorize?client_id=6e6377a2f4543ef05194&scope=user:email,user:follow,gist" class="btn-github">Log in with Github</a><div ng-if="main.Auth.isLogged()" layout="row" layout-align="end center"><img ng-src="{{main.user.avatar_url}}" alt="{{main.user.name}}" class="face"> <span>{{main.user.name}}</span></div></navbar><md-content><div class="techs" layout-align="space-around center"><md-card ng-model="main.html" ng-change="main.change(\'html\')" flex="33" ui-ace="{ useWrapMode : true, showGutter: false, theme:\'twilight\', mode: \'html\' }"></md-card><md-card ng-model="main.css" ng-change="main.change(\'css\')" flex="33" ui-ace="{ useWrapMode : true, showGutter: false, theme:\'twilight\', mode: \'css\' }"></md-card><md-card ng-model="main.js" ng-change="main.change(\'js\')" flex="33" ui-ace="{ useWrapMode : true, showGutter: false, theme:\'twilight\', mode: \'javascript\' }"></md-card></div><iframe id="preview"></iframe></md-content><footer><md-toolbar layout="row" layout-align="center center"><p>With â™¥ from <a href="https://twitter.com/JLCarv">@JLCarv</a></p></md-toolbar></footer></div>'),t.put("components/navbar/navbar.html",'<md-toolbar><div class="md-toolbar-tools"><span>Coder</span><div layout="row" layout-align="space-between center" source="" ng-transclude="" flex="100"></div></div></md-toolbar>')}]);